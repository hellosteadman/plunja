var TemplateRegistry=function(e){function n(e){var n=0,t,r;if(0==e.length)return n;for(t=0,l=e.length;l>t;t++)r=e.charCodeAt(t),n=(n<<5)-n+r,n|=0;return n}function t(e,n){return{name:e,resolve:function(r){var o,f,i,u,d,a,l;if("undefined"==typeof r&&(r={}),o=e.indexOf("."),o>-1)return f=e.substr(o+1),l=r[e.substr(0,o)],t(f,n).resolve(l);if(i=e.indexOf("|"),i>-1){if(u=n.filters[e.substr(i+1)],"undefined"==typeof u)throw"Filter "+e.substr(i+1)+" not found";return d=r[e.substr(0,i)],"undefined"!=typeof d?u(d):("undefined"!=typeof console&&"undefined"!=typeof console.warn&&console.warn("Variable",e,"not found"),"")}return a=r[e],"undefined"!=typeof a?a:("undefined"!=typeof console&&"undefined"!=typeof console.warn&&console.warn("Variable",e,"not found"),"")}}}function r(e,t){function r(n,r){function f(){r(new o(n,t).parse(a._html.toString()))}"undefined"!=typeof a._html?f():i.locator(e,function(n){if("boolean"==typeof n&&!n)throw"Template "+e+" not found";a._html=n,f()})}function f(e,n){if("undefined"!=typeof d[e])for(var t in d[e])d[e][t](n)}var u,d={},a={render:function(e){return r(e,function(e){f("render",e)}),a},renderTo:function(e,n){return r(n,function(n){e.innerHTML=n,f("render",n)}),a},appendTo:function(e,n){return r(n,function(n){e.innerHTML+=n,f("render",n)}),a},on:function(e,t){"undefined"==typeof d[e]&&(d[e]={});var r=n(t.toString());return"undefined"==typeof d[e][r]&&(d[e][r]=t),a},off:function(e,t){if("undefined"==typeof t)d[e]={};else if("undefined"!=typeof d[e]){var r={},o=n(t.toString());for(var f in d[e])f!=o&&(r[f]=d[e][f]);d[e]=r}return a}};return a}function o(e,n){return"undefined"==typeof e&&(e={}),{parse:function(r){for(var o=new RegExp(/\{\{ ?([^{} ]+) ?\}\}/),f=new RegExp(/\{\% ?([^\% ]+)((?: )[^\%]+)? ?\%\}/),i=r.match(f),u={},d,a,l,c,s,p,g,h,y,w;i&&i.length>1;){if(d=i[1],a=i[2],d=n.tags[d],"undefined"==typeof d)throw"Tag "+i[1]+" not found";if("undefined"!=typeof d.endtag){if(l=new RegExp("({% ?"+d.endtag+" ?%}).*"),c=r.match(l),!c||0==c.length)throw"Tag "+i[1]+" found, but no "+d.endtag+" found";for(;c&&c.length>0;){s=c[c.length-1],h=r.indexOf(i[0])+i[0].length,y=r.lastIndexOf(s)-h,w=r.substr(h,y),r=r.replace(i[0]+w+s,d.handler(n,e,a,w));break}}else r=r.replace(f,d(a,r));break}for(i=r.match(o);i&&i.length>1;)p=i[1],"undefined"==typeof u[p]&&(u[p]=t(p,n)),g=u[p].resolve(e),r=r.replace(o,g),i=r.match(o);return r}}}var f={locator:function(e,n){if("undefined"!=typeof jQuery){var t=jQuery('script[data-template="'+e+'"]');return t.length>0?void n(t.html()):void n(!1)}throw"Locator not defined"},filters:{uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()}},tags:{urlencode:{endtag:"endurlencode",handler:function(e,n,t,r){return escape(new o(n,e).parse(r.toString()))}},"for":{endtag:"endfor",handler:function(e,n,r,f){var i=new RegExp(/^(\w+) in ([\w\.]+)$/),u=r.trim().match(i),d,a,l,c=[];if(u&&u.length>2){if(d=u[1],a=t(u[2],e).resolve(n),"undefined"==typeof a)return"";if(a&&a.length){l={};for(var s in n)l[s]=n[s];for(var p=0;p<a.length;p++)l[d]=a[p],c.push(new o(l,e).parse(f.toString()))}return c.join("")}throw"Syntax error in for tag"}}}},i={},u={};for(var d in f)i[d]=f[d];if("objects"==typeof e)for(var d in e)switch(d){case"filters":for(var a in e.filters)i.filters[a]=e.filters[a];break;case"tags":for(var a in e.tags)i.tags[a]=e.tags[a];break;default:if("undefined"==typeof f[d]&&"undefined"!=typeof console&&"undefined"!=typeof console.warn){console.warn("Unrecognised TemplateRegistry option",d);continue}i[d]=e[d]}return i.get=function(e){return"undefined"==typeof u[e]&&(u[e]=new r(e,i)),u[e]},i};
//# sourceMappingURL=./plunja.min.map